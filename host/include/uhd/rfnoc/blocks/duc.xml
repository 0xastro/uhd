<!--This defines one NoC-Block.-->
<nocblock>
  <name>Tx DSP (DUC/CORDIC)</name>
  <blockname>DUC</blockname>
  <key>DUC</key>
  <!--There can be several of these:-->
  <ids>
    <id revision="0">D11C</id>
  </ids>
  <!-- Registers -->
  <registers>
    <!--Note: AXI config bus uses 129 & 130-->
    <setreg>
      <name>INTERP_WORD</name> <!--Includes the half-bands and the CIC-->
      <address>133</address>
    </setreg>
    <setreg>
      <name>INTERP</name>
      <address>133</address>
    </setreg>
    <setreg>
      <name>CORDIC_FREQ</name>
      <address>131</address>
    </setreg>
    <setreg>
      <name>SCALE_IQ</name>
      <address>132</address>
    </setreg>
  </registers>
  <!-- Args -->
  <args>
    <arg>
      <name>interp</name>
      <type>int</type>
      <value>200</value>
      <check>GE($interp, 1) AND LE($spp, 255)</check>
      <check_message>DUC interpolation must be in [1, 255].</check_message>
      <!--<action>-->
          <!--IF(EQUAL(MODULO($interp, 4), 0), SR_WRITE("INTERP_WORD", BITWISE_OR(SHIFT_LEFT(DIV($interp, 4), 2) , 0x3))) OR-->
          <!--IF(EQUAL(MODULO($interp, 2), 0), SR_WRITE("INTERP_WORD", BITWISE_OR(SHIFT_LEFT(DIV($interp, 2), 2) , 0x1))) OR-->
          <!--SR_WRITE("INTERP_WORD", SHIFT_LEFT(DIV($interp), 2))-->
      <!--</action>-->
      <!--FIXME Add scaling foo-->
    </arg>
    <arg>
      <name>freq</name>
      <type>double</type>
      <value>0.0</value>
      <!--<action>-->
          <!--SR_WRITE("CORDIC_FREQ", $cordic_freq)-->
      <!--</action>-->
      <!--FIXME Calculate this properly-->
    </arg>
    <arg>
      <name>input_rate</name>
      <type>double</type>
      <value>1.0</value>
      <check>GE($input_rate, 0.0)</check>
      <check_message>The input rate must be a positive value (in Hz).</check_message>
    </arg>
    <arg>
      <name>output_rate</name>
      <type>double</type>
      <value>1.0</value>
      <check>GE($output_rate, 0.0)</check>
      <check_message>The output rate must be a positive value (in Hz).</check_message>
    </arg>
    <arg>
      <name>fullscale</name>
      <type>double</type>
      <value>1.0</value>
      <check>GE($fullscale, 0.0)</check>
      <check_message>The output rate must be a positive value (in Hz).</check_message>
      <!--FIXME Calculate this properly-->
    </arg>
  </args>
  <!--All the connections to the outside world are listed in 'ports':-->
  <ports>
    <sink>
      <name>in</name>
      <type>sc16</type>
    </sink>
    <source>
      <name>out</name>
      <type>sc16</type>
    </source>
  </ports>
</nocblock>

